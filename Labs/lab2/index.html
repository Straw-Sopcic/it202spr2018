<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css"
          integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ"
          crossorigin="anonymous">
</head>

<body>
    <div class="container" id="home"> <p>NY TIMES MOVIE REVIEW SEARCH</p></div>
    
    <div class="container" name="tempName" id="search">
          <input type="text" name="tempName" id="query" placeholder="enter a search term">
          <button name="btnSearch" id="btnSearch">Search</button>
    </div>
    
    <div class="container" id="results"></div>

    
    <script
          src="http://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"
            integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"
            crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"
            integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn"
            crossorigin="anonymous"></script>

    <script>
        // Built by LucyBot. www.lucybot.com


        function doSearch(){

            $( '#results' ).empty();


                var url = "https://api.nytimes.com/svc/movies/v2/reviews/search.json";
                url += '?' + $.param({
                  'api-key': "19ba3156872e42d89d9ec7012eaf3efe",
                  'query': $('#query').val()
                });

                $.ajax({
                  url: url,
                  method: 'GET',
                }).done(function(result) {

                    console.log('we got this from the user query: ' + $('#query').val());
                    console.log(result);


                      $.each(result.results, function(i,v){
                        $("#results").append(v.display_title + '\t-\t(' + v.opening_date + ')'+ '<br>');
                      })

                }).fail(function(err) {
                    console.log('this was a failure');
                  throw err;
                });

        }

        $('#btnSearch').click( doSearch);
    </script>
    
</body>


