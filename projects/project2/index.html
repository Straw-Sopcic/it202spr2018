
<!DOCTYPE html>

<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <title>psSearch</title>

        <!--CUSTOM FONTS-->
        <link href="https://fonts.googleapis.com/css?family=Sarina" rel="stylesheet">
        <link href="themify-icons.css"
              type="text/css"
              rel="stylesheet"/>
        <!--font-family: 'Sarina', cursive;-->

        <!--STYLE SHEETS-->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css"
              integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ"
              crossorigin="anonymous">
        <link href = "project2Style.css"
		  type = "text/css"
		  rel = "stylesheet" />
    </head>



    <body>

        <div id="compNav">
        <ul>
            <li ><a class="active" id="mainTitle" href="">psSearch</a></li>
            <li class="customDropDown">
                <a href="#" class="dropbtn">Public School Search <span class="arrowIcon ti-angle-right" > </span></a>
                <div class="dropdown-content">
                    <select class="dropList" id="sel1" multiple>

                    </select>
                </div>
            </li>
            <li style="float:right;"><button href="" class="searchButton" id="btn1">Search</button></li>
        </ul>
        </div>

        <div id="phoneNav">
            <div class="container-fluid" style="padding-right: 0px; padding-left: 0px;">
                <p class="active" id="mainTitleMobile" href="">psSearch</p>
            </div>
            <div class="container-fluid" style="padding-right: 0px; padding-left: 0px;">
            <ul>
            <li class="customDropDown">
                <a href="#" class="dropbtn">Public School Search <span class="ti-angle-right arrowIcon" > </span></a>
                <div class="dropdown-content">
                    <select class="dropList" id="sel2" multiple>

                    </select>
                </div>
            </li>
            <li style="float:right;"><button href="" class="searchButton" id="btn2">Search</button></li>
        </ul>
                </div>
        </div>

        <div class="container-fluid" id="results">



        </div>




        <script
              src="http://code.jquery.com/jquery-3.3.1.min.js"
              integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
              crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"
                integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"
                crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"
                integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn"
                crossorigin="anonymous"></script>

        <script>
            var searchParams= [];

            function getHMap(){
                $.get('https://data.cityofchicago.org/resource/76dk-7ieb.json?$where=school_type IN (\'Career academy\')')
                  .done( function(response){
                      console.log(response);
                      $.each(response, function(i,v){
                          $("#results").append('<h1>Name:' + v.long_name + '\t-\tAddress: ' +
                                v.address + '</h1>');
                      });

                  })
            }


            function getRandomColor() {
                  var letters = '0123456789ABCDEF';
                  var color = '#';
                  for (var i = 0; i < 6; i++) {
                        color += letters[Math.floor(Math.random() * 16)];
                  }
                  return color;
            }

            $(document).ready(function(){
                $(".customDropDown").mouseenter(function(){
                    $(".arrowIcon").removeClass("ti-angle-right");
                    $(".arrowIcon").addClass("ti-angle-down");
                });

                 $(".customDropDown").mouseleave(function(){
                     $(".arrowIcon").removeClass("ti-angle-down");
                    $(".arrowIcon").addClass("ti-angle-right");
                });

                $.get('https://data.cityofchicago.org/resource/76dk-7ieb.json?$select=school_type%20&$group=school_type')
                  .done( function(response){
                      console.log(response);
                      $.each(response, function(i,v){
                          $("<option >" + v.school_type + "</option>").appendTo(".dropList");
                      });

                  })

                $( "#btn1" ).click(function() {
                    searchParams= [];
                    $('#sel1 > option').each(function () {
                        console.log(this.selected,this.value);
                        if(this.selected){
                            searchParams.push(this.value);
                        }

                    });
                    getHMap();
                });

                $( "#btn2" ).click(function() {
                    $('sel2 > option').each(function () {
                       searchParams= [];
                       console.log(this.selected,this.value);
                       if(this.selected){
                            searchParams.push(this.value);
                        }
                    });
                    getHMap();

                });

            });

        </script>

    </body>
</html>
